<!DOCTYPE html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
  <title>Phaser</title>
  <script src="//cdn.jsdelivr.net/phaser/2.6.2/phaser.min.js"></script>
  <style>
    body {
      margin: 0;
    }
  </style>
</head>

<body>
  <script type="text/javascript">
    window.onload = function() {


      var game = new Phaser.Game(window.innerWidth * window.devicePixelRatio, window.innerHeight * window.devicePixelRatio,
        Phaser.AUTO, '', {
          preload: preload,
          create: create,
          update: update,
          render: render
        });

      function preload() {
        game.load.image('ship', 'thrust_ship2.png');
        game.load.image('bullet', 'bullet0.png');
        game.load.audio('laser', 'laser.wav');


      }


      var player;
      var bullets;

      var cursors;
      var fireButton;

      var bulletTime = 0;
      var bullet;

      var laser;

      function create() {

        bullets = game.add.physicsGroup();
        bullets.createMultiple(32, 'bullet', false);
        bullets.setAll('checkWorldBounds', true);
        bullets.setAll('outOfBoundsKill', true);

        player = game.add.sprite(400, 550, 'ship');
        game.physics.arcade.enable(player);
        player.body.collideWorldBounds = true;

        cursors = game.input.keyboard.createCursorKeys();
        fireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

        laser = game.add.audio('laser');

      }

      function update() {

        player.body.velocity.x = 0;

        if (cursors.left.isDown) {
          player.body.velocity.x = -600;
        } else if (cursors.right.isDown) {
          player.body.velocity.x = 600;
        }

        if (fireButton.isDown) {
          fireBullet();
          laser.play();
        }

      }

      function fireBullet() {

        if (game.time.time > bulletTime) {
          bullet = bullets.getFirstExists(false);

          if (bullet) {
            bullet.reset(player.x + 6, player.y - 12);
            bullet.body.velocity.y = -600;
            bulletTime = game.time.time + 100;
          }
        }

      }

      function render() {

      }
    };
  </script>
</body>

</html>
